(this.webpackJsonpvidly=this.webpackJsonpvidly||[]).push([[0],{37:function(e,t,n){},39:function(e,t,n){},44:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n(28),i=n.n(c),l=n(4),o=(n(37),n(2)),s=n(31),b=n(16),d=[{_id:"000000000000000000000000",name:"All Genres"},{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"}];function u(e){return d.filter((function(t){return t.name!==e}))}var m=[{_id:"5b21ca3eeb7f6fbccd471815",title:"Terminator",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:6,dailyRentalRate:2.5,publishDate:"2018-01-03T19:04:28.809Z",liked:!0},{_id:"5b21ca3eeb7f6fbccd471816",title:"Die Hard",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:5,dailyRentalRate:2.5},{_id:"5b21ca3eeb7f6fbccd471817",title:"Get Out",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:8,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd471819",title:"Trip to Italy",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181a",title:"Airplane",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181b",title:"Wedding Crashers",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181e",title:"Gone Girl",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:7,dailyRentalRate:4.5},{_id:"5b21ca3eeb7f6fbccd47181f",title:"The Sixth Sense",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:4,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd471821",title:"The Avengers",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:7,dailyRentalRate:3.5}];function j(){return m}function h(e,t){var n={_id:t};(n.title=e.title,n.genre=d.find((function(t){return t.name===e["genre.name"]})),n.numberInStock=e.numberInStock,n.dailyRentalRate=e.dailyRentalRate,n._id)?(f(n._id),m.push(n)):(n._id=Date.now(),m.push(n));return n}function f(e){var t=m.find((function(t){return t._id===e}));return m.splice(m.indexOf(t),1),t}var v=n(9),O=n.n(v),p=(n(39),n(10)),x=function(e){var t=e.sortColumn,n=e.allData,c=e.setSortColumn,i=e.columns,l=e.onSort;Object(r.useEffect)((function(){o(t.path,"asc")}),[]);var o=function(e,a){var r=Object(p.a)({},t);r.path===e?r.order="asc"===r.order?"desc":"asc":(r.path=e,r.order="asc"),a&&(r.order=a),c(r);var i=O.a.orderBy(n,[r.path],[r.order]);l(i)},s=function(e){return e.path!==t.path?null:"asc"===t.order?Object(a.jsx)("i",{className:"fa fa-caret-up"}):Object(a.jsx)("i",{className:"fa fa-caret-down"})};return Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:i.map((function(e){return Object(a.jsxs)("th",{className:"clickable",onClick:function(){return o(e.path)},children:[e.label," ",s(e)]},e.path||e.key)}))})})},g=function(e){var t=e.data,n=e.columns,r=function(e,t){return t.content?t.content(e):O.a.get(e,t.path)};return Object(a.jsx)("tbody",{children:t.map((function(e){return Object(a.jsx)("tr",{children:n.map((function(t){return Object(a.jsx)("td",{children:r(e,t)},e._id+(t.path||t.key))}))},e._id)}))})},y=function(e){var t=e.columns,n=e.sortColumn,r=e.setSortColumn,c=e.allData,i=e.onSort,l=e.data;return Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)(x,{columns:t,sortColumn:n,setSortColumn:r,allData:c,onSort:i}),Object(a.jsx)(g,{data:l,columns:t})]})},S=function(e){var t=e.liked?"fas fa-heart":"far fa-heart",n=e.liked?"red":"black";return Object(a.jsx)("i",{style:{color:n,cursor:"pointer"},className:t,onClick:e.onClick})},k=function(e){var t=e.to;return Object(a.jsx)(l.b,{to:t,style:{textDecoration:"none",color:"White"},children:Object(a.jsx)("button",{className:"btn btn-primary mt-1 mb-2",children:"New Movie"})})},N=function(e){var t=e.movies,n=e.allGenres,r=e.onFilterGenre,c=e.onLike,i=e.onDelete,o=e.onSort,s=e.sortColumn,b=e.setSortColumn,d=e.allMovies,u=e.currentGenre,m=[{path:"title",label:"Title",content:function(e){return Object(a.jsx)(l.b,{to:{pathname:"/movies/".concat(e._id),state:e},children:e.title})}},{path:"genre.name",label:"Genre"},{path:"numberInStock",label:"Stock"},{path:"dailyRentalRate",label:"Rate"},{key:"like",content:function(e){return Object(a.jsx)(S,{onClick:function(){return c(e)},liked:e.liked})}},{key:"delete",content:function(e){return Object(a.jsx)("button",{className:"btn btn-danger",onClick:function(){return i(e)},children:"Delete"})}}];return Object(a.jsxs)("div",{className:"table-btn-container",children:[Object(a.jsx)("div",{className:"btn-container",children:n.map((function(e){return Object(a.jsx)("button",{className:e.name===u?"btn-primary":"",onClick:function(){return r(e)},children:e.name},e._id)}))}),Object(a.jsxs)("div",{children:[Object(a.jsx)(k,{to:"/movies/new"}),Object(a.jsx)("h5",{children:t.length>0?"Showing ".concat(t.length," movies in the database."):"There are no movies in the database  "}),Object(a.jsx)(y,{columns:m,data:t,onSort:o,setSortColumn:b,sortColumn:s,allData:d})]})]})},R=function(e){var t=e.itemsCount,n=e.pageSize,r=e.onPageChange,c=e.currentPage,i=Math.ceil(t/n);if(1===i)return null;var l=O.a.range(1,i+1);return Object(a.jsx)("nav",{children:Object(a.jsx)("ul",{className:"pagination",children:l.map((function(e){return Object(a.jsx)("li",{className:c===e?"page-item active":"page-item",children:Object(a.jsx)("a",{className:"page-link",onClick:function(){return r(e)},children:e})},e)}))})})};function C(e,t,n){var a=(t-1)*n;return O()(e).slice(a).take(n).value()}var _=function(){var e=Object(r.useState)(j()),t=Object(b.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(1),l=Object(b.a)(i,2),o=l[0],u=l[1],m=Object(r.useState)(4),h=Object(b.a)(m,2),v=h[0],p=(h[1],Object(r.useState)(C(n,o,v))),x=Object(b.a)(p,2),g=x[0],y=x[1],S=Object(r.useState)(d),k=Object(b.a)(S,2),_=k[0],I=(k[1],Object(r.useState)({path:"title",order:"asc"})),w=Object(b.a)(I,2),G=w[0],A=w[1],D=Object(r.useState)("All Genres"),T=Object(b.a)(D,2),F=T[0],P=T[1];Object(r.useEffect)((function(){y(C(n,o,v))}),[n]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(N,{movies:g,allGenres:_,onFilterGenre:function(e){var t=j(),n="All Genres"===e.name?j():t.filter((function(t){return JSON.stringify(t.genre)===JSON.stringify(e)})),a=O.a.orderBy(n,[G.path],[G.order]);P(e.name),y(C(a,1,v)),c(a)},onLike:function(e){var t=Object(s.a)(g),n=g.indexOf(e);t[n].liked=!t[n].liked,y(t)},onDelete:function(e){f(e._id);var t=O.a.orderBy(j(),[G.path],[G.order]);c(t),y(C(t,o,v))},onSort:function(e){y(C(e,o,v)),c(e)},sortColumn:G,setSortColumn:A,allMovies:n,currentGenre:F,setAllMovies:c}),Object(a.jsx)(R,{itemsCount:n.length,pageSize:v,onPageChange:function(e){u(e),y(C(n,e,v))},currentPage:o})]})},I=function(){return Object(a.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(a.jsx)(l.c,{className:"navbar-brand",to:"/movies",children:"Vidly"}),Object(a.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"true","aria-label":"Toggle navigation",children:Object(a.jsx)("span",{className:"navbar-toggler-icon"})}),Object(a.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(a.jsxs)("div",{className:"navbar-nav",children:[Object(a.jsx)(l.c,{className:"nav-link nav-item",to:"/movies",children:"Movies"}),Object(a.jsx)(l.c,{className:"nav-link nav-item",to:"/customers",children:"Customers"}),Object(a.jsx)(l.c,{className:"nav-link nav-item",to:"/rentals",children:"Rentals"}),Object(a.jsx)(l.c,{className:"nav-link nav-item",to:"/login",children:"Login"}),Object(a.jsx)(l.c,{className:"nav-link nav-item",to:"/register",children:"Register"})]})})]})},w=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("h1",{children:"Customers"})})},G=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("h1",{children:"Rentals"})})},A=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("h1",{children:"NotFound 404 !!!"})})},D=n(11),T=n(12),F=n(13),P=n(15),q=n(14),B=n(5),M=n.n(B),L=n(30),E=n(21),J=function(e){var t=e.name,n=e.label,r=e.error,c=Object(E.a)(e,["name","label","error"]);return Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:t,children:n}),Object(a.jsx)("input",Object(p.a)(Object(p.a)({},c),{},{name:t,id:t,className:"form-control"})),r&&Object(a.jsx)("div",{className:"alert alert-danger",children:r})]})},U=function(e){var t=e.name,n=e.label,r=e.options,c=e.error,i=Object(E.a)(e,["name","label","options","error"]);return Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:t,children:n}),Object(a.jsxs)("select",Object(p.a)(Object(p.a)({name:t,id:t},i),{},{className:"form-control",children:[Object(a.jsx)("option",{value:""}),r.map((function(e){return Object(a.jsx)("option",{value:e.name,children:e.name},e._id)}))]})),c&&Object(a.jsx)("div",{className:"alert alert-danger",children:c})]})},z=function(e){Object(P.a)(n,e);var t=Object(q.a)(n);function n(){var e;Object(T.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{},errors:{}},e.validate=function(){var t=M.a.validate(e.state.data,e.schema,{abortEarly:!1}).error;if(!t)return null;var n,a={},r=Object(L.a)(t.details);try{for(r.s();!(n=r.n()).done;){var c=n.value;a[c.path[0]]=c.message}}catch(i){r.e(i)}finally{r.f()}return a},e.validateProperty=function(t){var n=t.name,a=t.value,r=Object(D.a)({},n,a),c=Object(D.a)({},n,e.schema[n]),i=M.a.validate(r,c).error;return i?i.details[0].message:null},e.handleSubmit=function(t){t.preventDefault();var n=e.validate();e.setState({errors:n||{}}),n||e.doSubmit(e.state.history)},e.handleChange=function(t){var n=t.currentTarget,a=Object(p.a)({},e.state.errors),r=e.validateProperty(n);r?a[n.name]=r:delete a[n.name];var c=Object(p.a)({},e.state.data);c[n.name]=n.value,e.setState({data:c,errors:a})},e}return Object(F.a)(n,[{key:"renderButton",value:function(e){return Object(a.jsx)("button",{disabled:this.validate(),className:"btn btn-primary",children:e})}},{key:"renderSelect",value:function(e,t,n){var r=this.state,c=r.data,i=r.errors;return Object(a.jsx)(U,{name:e,value:c[e],label:t,options:n,onChange:this.handleChange,error:i[e]})}},{key:"renderInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r=this.state,c=r.data,i=r.errors;return Object(a.jsx)(J,{type:n,name:e,value:c[e],label:t,onChange:this.handleChange,error:i[e]})}}]),n}(r.Component),W=function(e){Object(P.a)(n,e);var t=Object(q.a)(n);function n(){var e,r;Object(T.a)(this,n);for(var c=arguments.length,i=new Array(c),l=0;l<c;l++)i[l]=arguments[l];return(r=t.call.apply(t,[this].concat(i))).state={data:Object(D.a)({title:"",numberInStock:"",dailyRentalRate:""},"genre.name",""),errors:{}},r.schema=(e={title:M.a.string().required().label("Title"),numberInStock:M.a.number().required().label("Number In Stock")},Object(D.a)(e,"genre.name",M.a.string().valid(u("All Genres").map((function(e){return e.name}))).required().label("Genre")),Object(D.a)(e,"dailyRentalRate",M.a.number().min(1).max(10).required().label("Daily Rental Rate")),e),r.doSubmit=function(){var e=r.props.location.state;h(r.state.data,e&&e._id),r.props.history.push("/movies")},r.handleNotFound=function(){var e=r.props,t=e.location,n=(e.history,e.match),c=t.state;if("/movies/new"!==n.url&&void 0===c)return Object(a.jsx)(o.a,{from:"/movies/:id",to:"/not-found"})},r}return Object(F.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,n=(e.history,e.match,t.state);n&&this.setState({data:Object(D.a)({title:n.title,numberInStock:n.numberInStock,dailyRentalRate:n.dailyRentalRate},"genre.name",n.genre.name)})}},{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[this.handleNotFound(),Object(a.jsx)("h1",{children:"Movie Form "}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("title","Title"),this.renderSelect("genre.name","Genre",u("All Genres")),this.renderInput("numberInStock","NumberInStock"),this.renderInput("dailyRentalRate","DailyRentalRate"),this.renderButton("Save")]})]})}}]),n}(z),H=function(e){Object(P.a)(n,e);var t=Object(q.a)(n);function n(){var e;Object(T.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{username:"",password:""},errors:{}},e.schema={username:M.a.string().required().label("Username"),password:M.a.string().required().label("Password")},e.doSubmit=function(){console.log("Submitted")},e}return Object(F.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Login"}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("username","Username"),this.renderInput("password","Password","password"),this.renderButton("Login")]})]})}}]),n}(z),V=function(e){Object(P.a)(n,e);var t=Object(q.a)(n);function n(){var e;Object(T.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{username:"",password:"",name:""},errors:{}},e.schema={username:M.a.string().email().required().label("Username"),password:M.a.string().min(5).required().label("Password"),name:M.a.string().required().label("Name")},e.doSubmit=function(){console.log("Submitted")},e}return Object(F.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Register"}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("username","Username"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderButton("Register")]})]})}}]),n}(z);n(44);var Z=function(){return Object(a.jsxs)("main",{className:"container",children:[Object(a.jsx)(I,{}),Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{path:"/login",exact:!0,component:H}),Object(a.jsx)(o.b,{path:"/movies/:id",exact:!0,component:W}),Object(a.jsx)(o.b,{path:"/movies",exact:!0,component:_}),Object(a.jsx)(o.b,{path:"/customers",exact:!0,component:w}),Object(a.jsx)(o.b,{path:"/rentals",exact:!0,component:G}),Object(a.jsx)(o.b,{path:"/register",exact:!0,component:V}),Object(a.jsx)(o.b,{path:"/not-found",exact:!0,component:A}),Object(a.jsx)(o.a,{from:"/",to:"/movies",exact:!0}),Object(a.jsx)(o.a,{to:"/not-found"})]})]})};n(45),n(46);i.a.render(Object(a.jsx)(l.a,{children:Object(a.jsx)(Z,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.3d2eccc6.chunk.js.map